{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":""},{"location":"#cloudflare-terraform-module","title":"Cloudflare Terraform Module","text":"<p>Welcome to the Cloudflare Terraform Module documentation! This comprehensive module helps you manage Cloudflare resources using Terraform with a modular, easy-to-use approach.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>\ud83d\udcc4 Pages - Manage Cloudflare Pages projects with custom domains and build configurations</li> <li>\ud83c\udf10 DNS - Create and manage DNS records with full control over proxying and TTL</li> <li>\ud83d\udce7 Email Routing - Set up email forwarding and routing rules for your domains</li> <li>\ud83d\udd04 Automated Versioning - Semantic release integration for automated version management</li> <li>\ud83d\udcdd Auto-generated Docs - Terraform-docs integration for always up-to-date module documentation</li> </ul>"},{"location":"#why-use-this-module","title":"Why Use This Module?","text":"<p>This module provides a structured, maintainable way to manage your Cloudflare infrastructure:</p> <ul> <li>Modular Design: Use only what you need - each submodule is independent</li> <li>Best Practices: Built following Terraform and Cloudflare best practices</li> <li>Well Documented: Comprehensive examples and documentation for all features</li> <li>Production Ready: Tested and versioned for reliable deployments</li> <li>Type Safe: Strongly typed variables with validation</li> </ul>"},{"location":"#quick-example","title":"Quick Example","text":"<pre><code>module \"cloudflare_pages\" {\n  source = \"git::git@github.com:AutomationDojo/tf-module-cloudflare.git//modules/pages?ref=v1.0.0\"\n\n  account_id = var.cloudflare_account_id\n\n  projects = {\n    my-website = {\n      name              = \"my-website\"\n      production_branch = \"main\"\n      github_repo       = \"my-org/my-repo\"\n      build_command     = \"npm run build\"\n      destination_dir   = \"dist\"\n      custom_domain     = \"www.example.com\"\n    }\n  }\n}\n</code></pre>"},{"location":"#getting-started","title":"Getting Started","text":"<ol> <li>Installation - Set up the module in your project</li> <li>Quick Start - Get up and running quickly</li> <li>Modules - Explore available modules</li> </ol>"},{"location":"#requirements","title":"Requirements","text":"Name Version Terraform &gt;= 1.0 Cloudflare Provider ~&gt; 4.0"},{"location":"#license","title":"License","text":"<p>MIT License - See LICENSE file for details</p>"},{"location":"changelog/","title":"Changelog","text":""},{"location":"changelog/#changelog","title":"Changelog","text":"<p>All notable changes to this project will be documented in this file.</p> <p>The format is based on Keep a Changelog, and this project adheres to Semantic Versioning.</p> <p>For the automatically generated changelog, see CHANGELOG.md in the repository root.</p>"},{"location":"changelog/#100-2024-12-26","title":"1.0.0 - 2024-12-26","text":""},{"location":"changelog/#added","title":"Added","text":"<ul> <li>Initial release of Cloudflare Terraform Module</li> <li>Pages Module: Cloudflare Pages projects management</li> <li>GitHub integration for CI/CD</li> <li>Custom domain support</li> <li>Environment variables configuration</li> <li> <p>Support for multiple projects</p> </li> <li> <p>DNS Module: DNS records management</p> </li> <li>Support for all DNS record types (A, AAAA, CNAME, MX, TXT, etc.)</li> <li>Cloudflare proxy configuration</li> <li>Configurable TTL per record</li> <li> <p>Bulk record management</p> </li> <li> <p>Email Routing Module: Email forwarding and routing</p> </li> <li>Email forwarding to external addresses</li> <li>Rule-based routing with matchers</li> <li>Priority-based rule ordering</li> <li>Support for literal, wildcard, and regex patterns</li> <li> <p>Multiple action types (forward, drop, worker)</p> </li> <li> <p>Automated versioning with semantic-release</p> </li> <li>Auto-generated documentation with terraform-docs</li> <li>Comprehensive examples and documentation</li> </ul>"},{"location":"changelog/#documentation","title":"Documentation","text":"<ul> <li>Complete module documentation</li> <li>Getting started guide</li> <li>Installation instructions</li> <li>Usage examples</li> <li>Contributing guidelines</li> </ul>"},{"location":"contributing/","title":"Contributing","text":""},{"location":"contributing/#contributing","title":"Contributing","text":"<p>Thank you for considering contributing to the Cloudflare Terraform Module! This document provides guidelines and information for contributors.</p>"},{"location":"contributing/#how-to-contribute","title":"How to Contribute","text":""},{"location":"contributing/#reporting-bugs","title":"Reporting Bugs","text":"<p>If you find a bug, please create an issue on GitHub with:</p> <ul> <li>Clear description of the issue</li> <li>Steps to reproduce</li> <li>Expected vs actual behavior</li> <li>Terraform version</li> <li>Module version</li> <li>Relevant configuration (sanitized)</li> </ul>"},{"location":"contributing/#suggesting-features","title":"Suggesting Features","text":"<p>Feature requests are welcome! Please:</p> <ul> <li>Check existing issues first</li> <li>Describe the use case</li> <li>Explain why this would benefit others</li> <li>Provide example usage if possible</li> </ul>"},{"location":"contributing/#pull-requests","title":"Pull Requests","text":"<ol> <li>Fork the repository</li> <li>Create a feature branch: <code>git checkout -b feature/your-feature</code></li> <li>Make your changes</li> <li>Update documentation</li> <li>Run terraform-docs: <code>terraform-docs markdown . &gt; README.md</code></li> <li>Test your changes</li> <li>Commit with semantic commit messages</li> <li>Push and create a pull request</li> </ol>"},{"location":"contributing/#development-setup","title":"Development Setup","text":""},{"location":"contributing/#prerequisites","title":"Prerequisites","text":"<ul> <li>Terraform &gt;= 1.0</li> <li>terraform-docs</li> <li>Cloudflare account for testing</li> <li>Git</li> </ul>"},{"location":"contributing/#local-development","title":"Local Development","text":"<pre><code># Clone your fork\ngit clone git@github.com:your-username/tf-module-cloudflare.git\ncd tf-module-cloudflare\n\n# Create a branch\ngit checkout -b feature/my-feature\n\n# Make changes to a module\ncd modules/pages\n\n# Test the module\nterraform init\nterraform plan\n</code></pre>"},{"location":"contributing/#coding-standards","title":"Coding Standards","text":""},{"location":"contributing/#terraform-style","title":"Terraform Style","text":"<ul> <li>Use 2 spaces for indentation</li> <li>Follow Terraform Style Guide</li> <li>Run <code>terraform fmt -recursive</code> before committing</li> <li>Use meaningful variable and resource names</li> </ul>"},{"location":"contributing/#variable-naming","title":"Variable Naming","text":"<pre><code># Good\nvariable \"account_id\" {\n  description = \"Cloudflare account ID\"\n  type        = string\n}\n\n# Bad\nvariable \"acc\" {\n  type = string\n}\n</code></pre>"},{"location":"contributing/#documentation","title":"Documentation","text":"<ul> <li>Add descriptions to all variables</li> <li>Add descriptions to all outputs</li> <li>Update README.md with terraform-docs</li> <li>Include examples for new features</li> </ul>"},{"location":"contributing/#module-structure","title":"Module Structure","text":"<pre><code>modules/module-name/\n\u251c\u2500\u2500 main.tf          # Resources\n\u251c\u2500\u2500 variables.tf     # Input variables\n\u251c\u2500\u2500 outputs.tf       # Outputs\n\u251c\u2500\u2500 versions.tf      # Provider requirements\n\u2514\u2500\u2500 README.md        # Module documentation\n</code></pre>"},{"location":"contributing/#commit-messages","title":"Commit Messages","text":"<p>We use Semantic Commit Messages:</p> <pre><code>feat: add support for custom SSL certificates\nfix: correct DNS record TTL validation\ndocs: update email routing examples\nchore: update terraform-docs\ntest: add validation tests\nrefactor: improve variable structure\n</code></pre> <p>Types: - <code>feat</code>: New feature - <code>fix</code>: Bug fix - <code>docs</code>: Documentation only - <code>chore</code>: Maintenance - <code>test</code>: Tests - <code>refactor</code>: Code refactoring</p>"},{"location":"contributing/#testing","title":"Testing","text":""},{"location":"contributing/#manual-testing","title":"Manual Testing","text":"<p>Before submitting a PR:</p> <ol> <li>Test in a clean environment</li> <li>Verify <code>terraform init</code> works</li> <li>Verify <code>terraform plan</code> succeeds</li> <li>Test <code>terraform apply</code> in a test account</li> <li>Test <code>terraform destroy</code> cleans up properly</li> </ol>"},{"location":"contributing/#example-test","title":"Example Test","text":"<pre><code># In modules/pages directory\ncat &gt; test.tf &lt;&lt;EOF\nmodule \"test\" {\n  source = \"./\"\n\n  account_id = var.cloudflare_account_id\n\n  projects = {\n    test = {\n      name              = \"test-project\"\n      production_branch = \"main\"\n      github_repo       = \"test/repo\"\n      build_command     = \"npm run build\"\n      destination_dir   = \"dist\"\n    }\n  }\n}\nEOF\n\nterraform init\nterraform plan\n</code></pre>"},{"location":"contributing/#documentation-updates","title":"Documentation Updates","text":""},{"location":"contributing/#updating-module-documentation","title":"Updating Module Documentation","text":"<p>After changing variables or outputs:</p> <pre><code>cd modules/pages\nterraform-docs markdown . &gt; README.md\n</code></pre>"},{"location":"contributing/#updating-mkdocs-documentation","title":"Updating MkDocs Documentation","text":"<p>If you add features or change behavior:</p> <ol> <li>Update relevant pages in <code>docs/</code></li> <li>Test locally: <code>mkdocs serve</code></li> <li>Verify documentation builds correctly</li> </ol>"},{"location":"contributing/#release-process","title":"Release Process","text":"<p>Releases are automated using semantic-release:</p> <ol> <li>Merge PR to <code>main</code></li> <li>Semantic-release analyzes commits</li> <li>Automatically creates version tag</li> <li>Generates CHANGELOG.md</li> <li>Creates GitHub release</li> </ol>"},{"location":"contributing/#code-of-conduct","title":"Code of Conduct","text":""},{"location":"contributing/#our-standards","title":"Our Standards","text":"<ul> <li>Be respectful and inclusive</li> <li>Focus on constructive feedback</li> <li>Accept responsibility for mistakes</li> <li>Prioritize community benefit</li> </ul>"},{"location":"contributing/#unacceptable-behavior","title":"Unacceptable Behavior","text":"<ul> <li>Harassment or discrimination</li> <li>Trolling or insulting comments</li> <li>Personal or political attacks</li> <li>Publishing others' private information</li> </ul>"},{"location":"contributing/#questions","title":"Questions?","text":"<ul> <li>Open a GitHub Discussion</li> <li>Create an Issue</li> </ul>"},{"location":"contributing/#license","title":"License","text":"<p>By contributing, you agree that your contributions will be licensed under the MIT License.</p>"},{"location":"examples/complete-setup/","title":"Complete Setup","text":""},{"location":"examples/complete-setup/#complete-setup-example","title":"Complete Setup Example","text":"<p>This example demonstrates a complete Cloudflare infrastructure setup using all three modules together.</p>"},{"location":"examples/complete-setup/#scenario","title":"Scenario","text":"<p>We're setting up infrastructure for a SaaS company with:</p> <ul> <li>Marketing website hosted on Cloudflare Pages</li> <li>Documentation site hosted on Cloudflare Pages</li> <li>DNS records for various services</li> <li>Email routing for company email addresses</li> </ul>"},{"location":"examples/complete-setup/#directory-structure","title":"Directory Structure","text":"<pre><code>terraform/\n\u251c\u2500\u2500 main.tf\n\u251c\u2500\u2500 variables.tf\n\u251c\u2500\u2500 outputs.tf\n\u251c\u2500\u2500 terraform.tfvars (gitignored)\n\u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"examples/complete-setup/#configuration-files","title":"Configuration Files","text":""},{"location":"examples/complete-setup/#maintf","title":"main.tf","text":"<pre><code>terraform {\n  required_version = \"&gt;= 1.0\"\n\n  required_providers {\n    cloudflare = {\n      source  = \"cloudflare/cloudflare\"\n      version = \"~&gt; 4.0\"\n    }\n  }\n}\n\nprovider \"cloudflare\" {\n  api_token = var.cloudflare_api_token\n}\n\n# ============================================================================\n# Cloudflare Pages - Marketing Website\n# ============================================================================\n\nmodule \"pages_marketing\" {\n  source = \"git::git@github.com:AutomationDojo/tf-module-cloudflare.git//modules/pages?ref=v1.0.0\"\n\n  account_id = var.cloudflare_account_id\n\n  projects = {\n    marketing = {\n      name              = \"company-marketing\"\n      production_branch = \"main\"\n      github_repo       = \"company/marketing-site\"\n      build_command     = \"npm run build\"\n      destination_dir   = \"dist\"\n      custom_domain     = \"www.example.com\"\n      environment_variables = {\n        NODE_VERSION = \"20\"\n        NPM_VERSION  = \"10\"\n      }\n    }\n  }\n}\n\n# ============================================================================\n# Cloudflare Pages - Documentation\n# ============================================================================\n\nmodule \"pages_docs\" {\n  source = \"git::git@github.com:AutomationDojo/tf-module-cloudflare.git//modules/pages?ref=v1.0.0\"\n\n  account_id = var.cloudflare_account_id\n\n  projects = {\n    documentation = {\n      name              = \"company-docs\"\n      production_branch = \"main\"\n      github_repo       = \"company/docs\"\n      build_command     = \"mkdocs build\"\n      destination_dir   = \"site\"\n      custom_domain     = \"docs.example.com\"\n      environment_variables = {\n        PYTHON_VERSION = \"3.11\"\n      }\n    }\n  }\n}\n\n# ============================================================================\n# DNS Records\n# ============================================================================\n\nmodule \"dns\" {\n  source = \"git::git@github.com:AutomationDojo/tf-module-cloudflare.git//modules/dns?ref=v1.0.0\"\n\n  zone_id = var.cloudflare_zone_id\n\n  records = [\n    # Root domain - redirect to www\n    {\n      name    = \"@\"\n      type    = \"A\"\n      value   = \"192.0.2.1\"\n      ttl     = 1\n      proxied = true\n    },\n\n    # API server\n    {\n      name    = \"api\"\n      type    = \"A\"\n      value   = \"192.0.2.10\"\n      ttl     = 1\n      proxied = true\n    },\n\n    # Database (not proxied - direct connection)\n    {\n      name    = \"db\"\n      type    = \"A\"\n      value   = \"192.0.2.20\"\n      ttl     = 3600\n      proxied = false\n    },\n\n    # Status page\n    {\n      name    = \"status\"\n      type    = \"CNAME\"\n      value   = \"status-page.provider.com\"\n      ttl     = 1\n      proxied = true\n    },\n\n    # Regional API endpoints\n    {\n      name    = \"us-api\"\n      type    = \"A\"\n      value   = \"192.0.2.30\"\n      ttl     = 300\n      proxied = true\n    },\n    {\n      name    = \"eu-api\"\n      type    = \"A\"\n      value   = \"192.0.2.31\"\n      ttl     = 300\n      proxied = true\n    },\n\n    # SPF record for email\n    {\n      name    = \"@\"\n      type    = \"TXT\"\n      value   = \"v=spf1 include:_spf.mx.cloudflare.net ~all\"\n      ttl     = 3600\n      proxied = false\n    },\n\n    # DKIM record\n    {\n      name    = \"cloudflare._domainkey\"\n      type    = \"TXT\"\n      value   = \"v=DKIM1; p=MIGfMA0GCSqGSIb3DQEBAQUAA...\"\n      ttl     = 3600\n      proxied = false\n    }\n  ]\n}\n\n# ============================================================================\n# Email Routing\n# ============================================================================\n\nmodule \"email\" {\n  source = \"git::git@github.com:AutomationDojo/tf-module-cloudflare.git//modules/email?ref=v1.0.0\"\n\n  zone_id    = var.cloudflare_zone_id\n  account_id = var.cloudflare_account_id\n\n  email_routing = {\n    enabled = true\n\n    # Destination addresses (need to be verified)\n    addresses = [\n      {\n        email = \"admin@personal-email.com\"\n      },\n      {\n        email = \"support-team@personal-email.com\"\n      },\n      {\n        email = \"sales-team@personal-email.com\"\n      }\n    ]\n\n    # Routing rules\n    rules = [\n      # Contact form\n      {\n        name     = \"Contact form submissions\"\n        enabled  = true\n        priority = 0\n        matchers = [\n          {\n            type  = \"literal\"\n            field = \"to\"\n            value = \"contact@example.com\"\n          }\n        ]\n        actions = [\n          {\n            type  = \"forward\"\n            value = [\"admin@personal-email.com\"]\n          }\n        ]\n      },\n\n      # Support emails\n      {\n        name     = \"Support requests\"\n        enabled  = true\n        priority = 1\n        matchers = [\n          {\n            type  = \"literal\"\n            field = \"to\"\n            value = \"support@example.com\"\n          }\n        ]\n        actions = [\n          {\n            type  = \"forward\"\n            value = [\"support-team@personal-email.com\"]\n          }\n        ]\n      },\n\n      # Sales emails\n      {\n        name     = \"Sales inquiries\"\n        enabled  = true\n        priority = 2\n        matchers = [\n          {\n            type  = \"literal\"\n            field = \"to\"\n            value = \"sales@example.com\"\n          }\n        ]\n        actions = [\n          {\n            type  = \"forward\"\n            value = [\"sales-team@personal-email.com\"]\n          }\n        ]\n      },\n\n      # Info emails\n      {\n        name     = \"General information\"\n        enabled  = true\n        priority = 3\n        matchers = [\n          {\n            type  = \"literal\"\n            field = \"to\"\n            value = \"info@example.com\"\n          }\n        ]\n        actions = [\n          {\n            type  = \"forward\"\n            value = [\"admin@personal-email.com\"]\n          }\n        ]\n      },\n\n      # Catch-all (lowest priority)\n      {\n        name     = \"Catch all emails\"\n        enabled  = true\n        priority = 100\n        matchers = [\n          {\n            type  = \"wildcard\"\n            field = \"to\"\n            value = \"*@example.com\"\n          }\n        ]\n        actions = [\n          {\n            type  = \"forward\"\n            value = [\"admin@personal-email.com\"]\n          }\n        ]\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"examples/complete-setup/#variablestf","title":"variables.tf","text":"<pre><code>variable \"cloudflare_api_token\" {\n  description = \"Cloudflare API token with required permissions\"\n  type        = string\n  sensitive   = true\n}\n\nvariable \"cloudflare_account_id\" {\n  description = \"Cloudflare account ID\"\n  type        = string\n}\n\nvariable \"cloudflare_zone_id\" {\n  description = \"Cloudflare zone ID for example.com\"\n  type        = string\n}\n</code></pre>"},{"location":"examples/complete-setup/#outputstf","title":"outputs.tf","text":"<pre><code># ============================================================================\n# Pages Outputs\n# ============================================================================\n\noutput \"marketing_site_url\" {\n  description = \"Marketing website URL\"\n  value       = module.pages_marketing.custom_domains[\"marketing\"]\n}\n\noutput \"marketing_site_default_url\" {\n  description = \"Marketing website pages.dev URL\"\n  value       = module.pages_marketing.default_urls[\"marketing\"]\n}\n\noutput \"docs_site_url\" {\n  description = \"Documentation website URL\"\n  value       = module.pages_docs.custom_domains[\"documentation\"]\n}\n\noutput \"docs_site_default_url\" {\n  description = \"Documentation pages.dev URL\"\n  value       = module.pages_docs.default_urls[\"documentation\"]\n}\n\n# ============================================================================\n# DNS Outputs\n# ============================================================================\n\noutput \"dns_records\" {\n  description = \"All DNS records created\"\n  value       = module.dns.records\n  sensitive   = true\n}\n\n# ============================================================================\n# Email Routing Outputs\n# ============================================================================\n\noutput \"email_routing_status\" {\n  description = \"Email routing configuration status\"\n  value = {\n    enabled           = module.email.email_routing.enabled\n    addresses_count   = length(module.email.email_routing.addresses)\n    rules_count       = length(module.email.email_routing.rules)\n  }\n}\n</code></pre>"},{"location":"examples/complete-setup/#terraformtfvars","title":"terraform.tfvars","text":"<pre><code># Add to .gitignore!\ncloudflare_api_token  = \"your-api-token-here\"\ncloudflare_account_id = \"your-account-id\"\ncloudflare_zone_id    = \"your-zone-id\"\n</code></pre>"},{"location":"examples/complete-setup/#deployment-steps","title":"Deployment Steps","text":""},{"location":"examples/complete-setup/#1-initialize-terraform","title":"1. Initialize Terraform","text":"<pre><code>terraform init\n</code></pre>"},{"location":"examples/complete-setup/#2-review-the-plan","title":"2. Review the Plan","text":"<pre><code>terraform plan\n</code></pre> <p>Expected output will show: - 2 Cloudflare Pages projects - 2 custom domain configurations - 8+ DNS records - Email routing configuration with 5 rules</p>"},{"location":"examples/complete-setup/#3-apply-configuration","title":"3. Apply Configuration","text":"<pre><code>terraform apply\n</code></pre> <p>Type <code>yes</code> when prompted.</p>"},{"location":"examples/complete-setup/#4-verify-email-addresses","title":"4. Verify Email Addresses","text":"<p>After applying:</p> <ol> <li>Check email inboxes for verification emails from Cloudflare</li> <li>Click verification links in each email</li> <li>Wait for verification to complete</li> </ol>"},{"location":"examples/complete-setup/#5-view-outputs","title":"5. View Outputs","text":"<pre><code>terraform output\n</code></pre> <p>Example output: </p><pre><code>marketing_site_url = \"www.example.com\"\nmarketing_site_default_url = \"company-marketing.pages.dev\"\ndocs_site_url = \"docs.example.com\"\ndocs_site_default_url = \"company-docs.pages.dev\"\nemail_routing_status = {\n  enabled = true\n  addresses_count = 3\n  rules_count = 5\n}\n</code></pre><p></p>"},{"location":"examples/complete-setup/#testing","title":"Testing","text":""},{"location":"examples/complete-setup/#test-pages-deployments","title":"Test Pages Deployments","text":"<ol> <li>Push to your GitHub repositories</li> <li>Watch automatic deployments in Cloudflare dashboard</li> <li>Visit your custom domains</li> </ol>"},{"location":"examples/complete-setup/#test-dns-records","title":"Test DNS Records","text":"<pre><code># Test A record\ndig @1.1.1.1 api.example.com\n\n# Test CNAME\ndig @1.1.1.1 status.example.com\n\n# Test TXT (SPF)\ndig @1.1.1.1 example.com TXT\n</code></pre>"},{"location":"examples/complete-setup/#test-email-routing","title":"Test Email Routing","text":"<p>Send test emails to: - <code>contact@example.com</code> - <code>support@example.com</code> - <code>sales@example.com</code> - <code>random@example.com</code> (catch-all)</p> <p>Verify they arrive at the correct destination addresses.</p>"},{"location":"examples/complete-setup/#maintenance","title":"Maintenance","text":""},{"location":"examples/complete-setup/#update-to-latest-version","title":"Update to Latest Version","text":"<pre><code># Update module version in main.tf\n# Change ref=v1.0.0 to ref=v2.0.0\n\nterraform init -upgrade\nterraform plan\nterraform apply\n</code></pre>"},{"location":"examples/complete-setup/#add-new-dns-record","title":"Add New DNS Record","text":"<pre><code># In main.tf, add to dns module's records list:\n{\n  name    = \"staging\"\n  type    = \"A\"\n  value   = \"192.0.2.50\"\n  ttl     = 1\n  proxied = true\n}\n</code></pre> <p>Then apply: </p><pre><code>terraform apply\n</code></pre><p></p>"},{"location":"examples/complete-setup/#add-new-email-rule","title":"Add New Email Rule","text":"<pre><code># In main.tf, add to email module's rules list:\n{\n  name     = \"Billing emails\"\n  enabled  = true\n  priority = 4\n  matchers = [\n    {\n      type  = \"literal\"\n      field = \"to\"\n      value = \"billing@example.com\"\n    }\n  ]\n  actions = [\n    {\n      type  = \"forward\"\n      value = [\"billing@personal-email.com\"]\n    }\n  ]\n}\n</code></pre>"},{"location":"examples/complete-setup/#best-practices-demonstrated","title":"Best Practices Demonstrated","text":"<ol> <li>Module Versioning: Using specific version tags (<code>ref=v1.0.0</code>)</li> <li>Separation of Concerns: Each module handles one area</li> <li>Environment Variables: Properly configured for Pages builds</li> <li>DNS Organization: Clear naming and purpose for each record</li> <li>Email Priority: Specific rules before catch-all</li> <li>Security: API token in separate file (gitignored)</li> <li>Documentation: Clear outputs for easy reference</li> </ol>"},{"location":"examples/complete-setup/#cost-considerations","title":"Cost Considerations","text":"<p>This setup uses Cloudflare's free tier:</p> <ul> <li>Pages: 500 builds/month (free)</li> <li>DNS: Unlimited records (free)</li> <li>Email Routing: 200 destination addresses (free)</li> <li>SSL/TLS: Automatic (free)</li> <li>DDoS Protection: Included (free)</li> </ul>"},{"location":"examples/complete-setup/#next-steps","title":"Next Steps","text":"<ul> <li>Set up Terraform Cloud for remote state</li> <li>Add monitoring and alerts</li> <li>Implement GitOps workflow with CI/CD</li> <li>Add more environments (staging, development)</li> <li>Configure Cloudflare Access for internal tools</li> </ul>"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#installation","title":"Installation","text":"<p>This guide will help you get started with the Cloudflare Terraform Module.</p>"},{"location":"getting-started/installation/#prerequisites","title":"Prerequisites","text":"<p>Before using this module, ensure you have:</p> <ul> <li>Terraform &gt;= 1.0 installed</li> <li>Cloudflare Account with API access</li> <li>Git for module source control</li> </ul>"},{"location":"getting-started/installation/#cloudflare-api-token","title":"Cloudflare API Token","text":"<p>You'll need a Cloudflare API token with appropriate permissions:</p> <ol> <li>Log in to your Cloudflare Dashboard</li> <li>Go to My Profile &gt; API Tokens</li> <li>Click Create Token</li> <li>Choose a template or create a custom token with these permissions:</li> <li>Account - Cloudflare Pages: Edit</li> <li>Zone - DNS: Edit</li> <li>Zone - Email Routing Rules: Edit</li> </ol>"},{"location":"getting-started/installation/#configure-terraform","title":"Configure Terraform","text":""},{"location":"getting-started/installation/#1-set-up-the-cloudflare-provider","title":"1. Set up the Cloudflare Provider","text":"<pre><code>terraform {\n  required_version = \"&gt;= 1.0\"\n\n  required_providers {\n    cloudflare = {\n      source  = \"cloudflare/cloudflare\"\n      version = \"~&gt; 4.0\"\n    }\n  }\n}\n\nprovider \"cloudflare\" {\n  api_token = var.cloudflare_api_token\n}\n</code></pre>"},{"location":"getting-started/installation/#2-store-api-token-securely","title":"2. Store API Token Securely","text":"<p>Create a <code>terraform.tfvars</code> file (add to <code>.gitignore</code>):</p> <pre><code>cloudflare_api_token  = \"your-api-token-here\"\ncloudflare_account_id = \"your-account-id\"\ncloudflare_zone_id    = \"your-zone-id\"\n</code></pre> <p>Or use environment variables:</p> <pre><code>export CLOUDFLARE_API_TOKEN=\"your-api-token-here\"\nexport TF_VAR_cloudflare_account_id=\"your-account-id\"\nexport TF_VAR_cloudflare_zone_id=\"your-zone-id\"\n</code></pre>"},{"location":"getting-started/installation/#module-installation","title":"Module Installation","text":"<p>The module is installed directly from GitHub. No separate download is needed - Terraform handles this automatically.</p>"},{"location":"getting-started/installation/#using-specific-versions","title":"Using Specific Versions","text":"<p>It's recommended to pin to a specific version:</p> <pre><code>module \"cloudflare_pages\" {\n  source = \"git::git@github.com:AutomationDojo/tf-module-cloudflare.git//modules/pages?ref=v1.0.0\"\n  # ... configuration\n}\n</code></pre>"},{"location":"getting-started/installation/#using-latest","title":"Using Latest","text":"<p>For development or testing, you can use the latest version:</p> <pre><code>module \"cloudflare_pages\" {\n  source = \"git::git@github.com:AutomationDojo/tf-module-cloudflare.git//modules/pages?ref=main\"\n  # ... configuration\n}\n</code></pre> <p>Warning</p> <p>Using <code>ref=main</code> means you'll get the latest changes, which may include breaking changes.</p>"},{"location":"getting-started/installation/#initialize-terraform","title":"Initialize Terraform","text":"<p>After configuring your module sources, initialize Terraform:</p> <pre><code>terraform init\n</code></pre> <p>This will download the module and all required providers.</p>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<ul> <li>Quick Start Guide - Create your first resources</li> <li>Modules Overview - Explore available modules</li> <li>Examples - See complete configurations</li> </ul>"},{"location":"getting-started/quick-start/","title":"Quick Start","text":""},{"location":"getting-started/quick-start/#quick-start","title":"Quick Start","text":"<p>This guide will help you deploy your first resources using the Cloudflare Terraform Module.</p>"},{"location":"getting-started/quick-start/#basic-setup","title":"Basic Setup","text":""},{"location":"getting-started/quick-start/#1-create-a-terraform-configuration","title":"1. Create a Terraform Configuration","text":"<p>Create a new file <code>main.tf</code>:</p> <pre><code>terraform {\n  required_version = \"&gt;= 1.0\"\n\n  required_providers {\n    cloudflare = {\n      source  = \"cloudflare/cloudflare\"\n      version = \"~&gt; 4.0\"\n    }\n  }\n}\n\nprovider \"cloudflare\" {\n  api_token = var.cloudflare_api_token\n}\n</code></pre>"},{"location":"getting-started/quick-start/#2-define-variables","title":"2. Define Variables","text":"<p>Create <code>variables.tf</code>:</p> <pre><code>variable \"cloudflare_api_token\" {\n  description = \"Cloudflare API token\"\n  type        = string\n  sensitive   = true\n}\n\nvariable \"cloudflare_account_id\" {\n  description = \"Cloudflare account ID\"\n  type        = string\n}\n\nvariable \"cloudflare_zone_id\" {\n  description = \"Cloudflare zone ID\"\n  type        = string\n}\n</code></pre>"},{"location":"getting-started/quick-start/#example-1-deploy-a-cloudflare-pages-site","title":"Example 1: Deploy a Cloudflare Pages Site","text":"<p>Add to your <code>main.tf</code>:</p> <pre><code>module \"pages\" {\n  source = \"git::git@github.com:AutomationDojo/tf-module-cloudflare.git//modules/pages?ref=v1.0.0\"\n\n  account_id = var.cloudflare_account_id\n\n  projects = {\n    my-blog = {\n      name              = \"my-blog\"\n      production_branch = \"main\"\n      github_repo       = \"my-username/my-blog\"\n      build_command     = \"npm run build\"\n      destination_dir   = \"public\"\n      custom_domain     = \"blog.example.com\"\n    }\n  }\n}\n</code></pre>"},{"location":"getting-started/quick-start/#example-2-create-dns-records","title":"Example 2: Create DNS Records","text":"<pre><code>module \"dns\" {\n  source = \"git::git@github.com:AutomationDojo/tf-module-cloudflare.git//modules/dns?ref=v1.0.0\"\n\n  zone_id = var.cloudflare_zone_id\n\n  records = [\n    {\n      name    = \"www\"\n      type    = \"CNAME\"\n      value   = \"example.com\"\n      ttl     = 1\n      proxied = true\n    },\n    {\n      name    = \"api\"\n      type    = \"A\"\n      value   = \"192.0.2.1\"\n      ttl     = 1\n      proxied = true\n    }\n  ]\n}\n</code></pre>"},{"location":"getting-started/quick-start/#example-3-set-up-email-routing","title":"Example 3: Set Up Email Routing","text":"<pre><code>module \"email\" {\n  source = \"git::git@github.com:AutomationDojo/tf-module-cloudflare.git//modules/email?ref=v1.0.0\"\n\n  zone_id    = var.cloudflare_zone_id\n  account_id = var.cloudflare_account_id\n\n  email_routing = {\n    enabled = true\n    addresses = [\n      {\n        email = \"admin@example.com\"\n      }\n    ]\n    rules = [\n      {\n        name     = \"Forward contact emails\"\n        enabled  = true\n        priority = 0\n        matchers = [\n          {\n            type  = \"literal\"\n            field = \"to\"\n            value = \"contact@yourdomain.com\"\n          }\n        ]\n        actions = [\n          {\n            type  = \"forward\"\n            value = [\"admin@example.com\"]\n          }\n        ]\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"getting-started/quick-start/#deploy-your-configuration","title":"Deploy Your Configuration","text":""},{"location":"getting-started/quick-start/#1-initialize-terraform","title":"1. Initialize Terraform","text":"<pre><code>terraform init\n</code></pre>"},{"location":"getting-started/quick-start/#2-preview-changes","title":"2. Preview Changes","text":"<pre><code>terraform plan\n</code></pre>"},{"location":"getting-started/quick-start/#3-apply-configuration","title":"3. Apply Configuration","text":"<pre><code>terraform apply\n</code></pre> <p>Review the changes and type <code>yes</code> to confirm.</p>"},{"location":"getting-started/quick-start/#view-outputs","title":"View Outputs","text":"<p>After applying, you can view the outputs:</p> <pre><code>terraform output\n</code></pre>"},{"location":"getting-started/quick-start/#clean-up","title":"Clean Up","text":"<p>To destroy all resources:</p> <pre><code>terraform destroy\n</code></pre> <p>Warning</p> <p>This will delete all resources managed by this Terraform configuration.</p>"},{"location":"getting-started/quick-start/#next-steps","title":"Next Steps","text":"<ul> <li>Pages Module Documentation</li> <li>DNS Module Documentation</li> <li>Email Module Documentation</li> <li>Complete Setup Example</li> </ul>"},{"location":"modules/","title":"Overview","text":""},{"location":"modules/#modules-overview","title":"Modules Overview","text":"<p>The Cloudflare Terraform Module is organized into three main submodules, each focused on a specific area of Cloudflare functionality.</p>"},{"location":"modules/#available-modules","title":"Available Modules","text":""},{"location":"modules/#pages-module","title":"Pages Module","text":"<p>Manage Cloudflare Pages projects for static site hosting with automatic CI/CD.</p> <p>Key Features:</p> <ul> <li>GitHub integration for automatic deployments</li> <li>Custom domain support with SSL/TLS</li> <li>Environment variables configuration</li> <li>Production and preview environments</li> </ul> <p>View Pages Documentation \u2192</p>"},{"location":"modules/#dns-module","title":"DNS Module","text":"<p>Create and manage DNS records for your Cloudflare zones.</p> <p>Key Features:</p> <ul> <li>Support for all DNS record types</li> <li>Cloudflare proxy support</li> <li>Configurable TTL</li> <li>Bulk record management</li> </ul> <p>View DNS Documentation \u2192</p>"},{"location":"modules/#email-routing-module","title":"Email Routing Module","text":"<p>Set up email forwarding and routing rules for your domains.</p> <p>Key Features:</p> <ul> <li>Email forwarding to external addresses</li> <li>Rule-based routing with matchers</li> <li>Priority-based rule ordering</li> <li>Support for literal, wildcard, and regex patterns</li> </ul> <p>View Email Documentation \u2192</p>"},{"location":"modules/#module-design-philosophy","title":"Module Design Philosophy","text":"<p>Each module is designed to be:</p> <ul> <li>Independent: Use only the modules you need</li> <li>Composable: Combine modules for complete infrastructure</li> <li>Type-safe: Strongly typed with validation</li> <li>Well-documented: Clear examples and documentation</li> </ul>"},{"location":"modules/#using-multiple-modules","title":"Using Multiple Modules","text":"<p>You can combine modules in a single Terraform configuration:</p> <pre><code># Deploy a Pages site\nmodule \"pages\" {\n  source = \"git::git@github.com:AutomationDojo/tf-module-cloudflare.git//modules/pages?ref=v1.0.0\"\n  # ... configuration\n}\n\n# Configure DNS\nmodule \"dns\" {\n  source = \"git::git@github.com:AutomationDojo/tf-module-cloudflare.git//modules/dns?ref=v1.0.0\"\n  # ... configuration\n}\n\n# Set up email routing\nmodule \"email\" {\n  source = \"git::git@github.com:AutomationDojo/tf-module-cloudflare.git//modules/email?ref=v1.0.0\"\n  # ... configuration\n}\n</code></pre> <p>See the Complete Setup Example for a full configuration.</p>"},{"location":"modules/dns/","title":"DNS","text":""},{"location":"modules/dns/#dns-module","title":"DNS Module","text":"<p>The DNS module provides a simple way to manage DNS records in your Cloudflare zones.</p>"},{"location":"modules/dns/#features","title":"Features","text":"<ul> <li>All Record Types: Support for A, AAAA, CNAME, MX, TXT, SRV, and more</li> <li>Cloudflare Proxy: Enable/disable Cloudflare proxy per record</li> <li>Configurable TTL: Set Time To Live for each record</li> <li>Bulk Management: Manage multiple records efficiently</li> <li>Type Safety: Validation ensures correct record configuration</li> </ul>"},{"location":"modules/dns/#basic-usage","title":"Basic Usage","text":"<pre><code>module \"dns\" {\n  source = \"git::git@github.com:AutomationDojo/tf-module-cloudflare.git//modules/dns?ref=v1.0.0\"\n\n  zone_id = var.cloudflare_zone_id\n\n  records = [\n    {\n      name    = \"www\"\n      type    = \"CNAME\"\n      value   = \"example.com\"\n      ttl     = 1\n      proxied = true\n    }\n  ]\n}\n</code></pre>"},{"location":"modules/dns/#common-record-types","title":"Common Record Types","text":""},{"location":"modules/dns/#a-record-ipv4","title":"A Record (IPv4)","text":"<pre><code>module \"dns\" {\n  source  = \"git::git@github.com:AutomationDojo/tf-module-cloudflare.git//modules/dns?ref=v1.0.0\"\n  zone_id = var.cloudflare_zone_id\n\n  records = [\n    {\n      name    = \"api\"\n      type    = \"A\"\n      value   = \"192.0.2.1\"\n      ttl     = 1\n      proxied = true  # Enable Cloudflare proxy for DDoS protection\n    }\n  ]\n}\n</code></pre>"},{"location":"modules/dns/#aaaa-record-ipv6","title":"AAAA Record (IPv6)","text":"<pre><code>records = [\n  {\n    name    = \"ipv6\"\n    type    = \"AAAA\"\n    value   = \"2001:0db8:85a3:0000:0000:8a2e:0370:7334\"\n    ttl     = 1\n    proxied = false\n  }\n]\n</code></pre>"},{"location":"modules/dns/#cname-record","title":"CNAME Record","text":"<pre><code>records = [\n  {\n    name    = \"www\"\n    type    = \"CNAME\"\n    value   = \"example.com\"\n    ttl     = 1\n    proxied = true\n  }\n]\n</code></pre>"},{"location":"modules/dns/#mx-record-email","title":"MX Record (Email)","text":"<pre><code>records = [\n  {\n    name     = \"@\"\n    type     = \"MX\"\n    value    = \"mail.example.com\"\n    ttl      = 1\n    proxied  = false  # MX records cannot be proxied\n    priority = 10     # Mail server priority\n  }\n]\n</code></pre>"},{"location":"modules/dns/#txt-record","title":"TXT Record","text":"<pre><code>records = [\n  {\n    name    = \"@\"\n    type    = \"TXT\"\n    value   = \"v=spf1 include:_spf.google.com ~all\"\n    ttl     = 1\n    proxied = false  # TXT records cannot be proxied\n  }\n]\n</code></pre>"},{"location":"modules/dns/#srv-record","title":"SRV Record","text":"<pre><code>records = [\n  {\n    name    = \"_service._tcp\"\n    type    = \"SRV\"\n    value   = \"target.example.com\"\n    ttl     = 1\n    proxied = false\n    priority = 10\n    weight   = 5\n    port     = 8080\n  }\n]\n</code></pre>"},{"location":"modules/dns/#advanced-examples","title":"Advanced Examples","text":""},{"location":"modules/dns/#complete-website-setup","title":"Complete Website Setup","text":"<pre><code>module \"dns\" {\n  source  = \"git::git@github.com:AutomationDojo/tf-module-cloudflare.git//modules/dns?ref=v1.0.0\"\n  zone_id = var.cloudflare_zone_id\n\n  records = [\n    # Root domain\n    {\n      name    = \"@\"\n      type    = \"A\"\n      value   = \"192.0.2.1\"\n      ttl     = 1\n      proxied = true\n    },\n    # WWW subdomain\n    {\n      name    = \"www\"\n      type    = \"CNAME\"\n      value   = \"example.com\"\n      ttl     = 1\n      proxied = true\n    },\n    # API subdomain\n    {\n      name    = \"api\"\n      type    = \"A\"\n      value   = \"192.0.2.2\"\n      ttl     = 1\n      proxied = true\n    },\n    # Mail server\n    {\n      name     = \"@\"\n      type     = \"MX\"\n      value    = \"mail.example.com\"\n      ttl      = 1\n      proxied  = false\n      priority = 10\n    },\n    # SPF record\n    {\n      name    = \"@\"\n      type    = \"TXT\"\n      value   = \"v=spf1 mx ~all\"\n      ttl     = 1\n      proxied = false\n    }\n  ]\n}\n</code></pre>"},{"location":"modules/dns/#multi-environment-setup","title":"Multi-Environment Setup","text":"<pre><code>module \"dns_production\" {\n  source  = \"git::git@github.com:AutomationDojo/tf-module-cloudflare.git//modules/dns?ref=v1.0.0\"\n  zone_id = var.cloudflare_zone_id\n\n  records = [\n    {\n      name    = \"app\"\n      type    = \"CNAME\"\n      value   = \"prod-lb.example.com\"\n      ttl     = 1\n      proxied = true\n    }\n  ]\n}\n\nmodule \"dns_staging\" {\n  source  = \"git::git@github.com:AutomationDojo/tf-module-cloudflare.git//modules/dns?ref=v1.0.0\"\n  zone_id = var.cloudflare_zone_id\n\n  records = [\n    {\n      name    = \"staging\"\n      type    = \"CNAME\"\n      value   = \"staging-lb.example.com\"\n      ttl     = 1\n      proxied = true\n    }\n  ]\n}\n</code></pre>"},{"location":"modules/dns/#geographic-load-balancing","title":"Geographic Load Balancing","text":"<pre><code>records = [\n  # US endpoint\n  {\n    name    = \"us-api\"\n    type    = \"A\"\n    value   = \"192.0.2.1\"\n    ttl     = 300\n    proxied = true\n  },\n  # EU endpoint\n  {\n    name    = \"eu-api\"\n    type    = \"A\"\n    value   = \"192.0.2.2\"\n    ttl     = 300\n    proxied = true\n  },\n  # Asia endpoint\n  {\n    name    = \"asia-api\"\n    type    = \"A\"\n    value   = \"192.0.2.3\"\n    ttl     = 300\n    proxied = true\n  }\n]\n</code></pre>"},{"location":"modules/dns/#inputs","title":"Inputs","text":"Name Description Type Required <code>zone_id</code> Cloudflare zone ID <code>string</code> Yes <code>records</code> List of DNS records to create <code>list(object)</code> No (default: <code>[]</code>)"},{"location":"modules/dns/#record-object","title":"Record Object","text":"Field Description Type Required Default <code>name</code> Record name (use <code>@</code> for root) <code>string</code> Yes - <code>type</code> DNS record type <code>string</code> Yes - <code>value</code> Record value/target <code>string</code> Yes - <code>ttl</code> Time to live in seconds (1 = automatic) <code>number</code> No <code>1</code> <code>proxied</code> Enable Cloudflare proxy <code>bool</code> No <code>false</code> <code>priority</code> Priority (MX, SRV records) <code>number</code> No - <code>weight</code> Weight (SRV records) <code>number</code> No - <code>port</code> Port (SRV records) <code>number</code> No -"},{"location":"modules/dns/#outputs","title":"Outputs","text":"Name Description <code>records</code> Map of all created DNS records"},{"location":"modules/dns/#example-output-usage","title":"Example Output Usage","text":"<pre><code>output \"dns_records\" {\n  description = \"All DNS records\"\n  value       = module.dns.records\n}\n</code></pre>"},{"location":"modules/dns/#understanding-cloudflare-proxy","title":"Understanding Cloudflare Proxy","text":"<p>When <code>proxied = true</code>:</p> <ul> <li>DDoS Protection: Traffic routed through Cloudflare's network</li> <li>SSL/TLS: Automatic SSL certificate and encryption</li> <li>Performance: CDN caching and optimization</li> <li>Analytics: Detailed traffic analytics</li> <li>Limitations: Only works for HTTP/HTTPS traffic (A, AAAA, CNAME)</li> </ul> <p>When <code>proxied = false</code>:</p> <ul> <li>Direct Connection: DNS points directly to your server</li> <li>Required For: MX, TXT, SRV, and non-HTTP services</li> <li>Use Cases: Email servers, SSH, FTP, custom protocols</li> </ul>"},{"location":"modules/dns/#ttl-configuration","title":"TTL Configuration","text":"TTL Value Description Use Case <code>1</code> Automatic Cloudflare manages TTL (recommended for proxied records) <code>300</code> 5 minutes Frequently changing records <code>3600</code> 1 hour Standard configuration <code>86400</code> 24 hours Stable, rarely changing records <p>TTL Best Practice</p> <p>For proxied records, use <code>ttl = 1</code> (automatic). For non-proxied records, use higher values to reduce DNS queries.</p>"},{"location":"modules/dns/#important-notes","title":"Important Notes","text":"<p>Root Domain (@)</p> <p>Use <code>@</code> as the name for records at the root domain (e.g., <code>example.com</code> instead of a subdomain).</p> <p>Proxy Limitations</p> <p>Only A, AAAA, and CNAME records can be proxied. Other record types (MX, TXT, SRV) must have <code>proxied = false</code>.</p> <p>Wildcards</p> <p>You can use wildcards: <code>name = \"*\"</code> creates a wildcard record matching all subdomains.</p>"},{"location":"modules/dns/#prerequisites","title":"Prerequisites","text":"<ol> <li>Domain added to Cloudflare</li> <li>Nameservers pointing to Cloudflare</li> <li>Zone ID from Cloudflare dashboard</li> </ol>"},{"location":"modules/dns/#related","title":"Related","text":"<ul> <li>Pages Module - Works great with custom domains</li> <li>Email Module - Automatic MX record management</li> <li>Cloudflare DNS Documentation</li> </ul>"},{"location":"modules/email/","title":"Email Routing","text":""},{"location":"modules/email/#email-routing-module","title":"Email Routing Module","text":"<p>The Email Routing module enables you to forward emails from your domain to destination addresses using Cloudflare's email routing service.</p>"},{"location":"modules/email/#features","title":"Features","text":"<ul> <li>Email Forwarding: Forward emails from your domain to any destination address</li> <li>Rule-Based Routing: Create sophisticated routing rules with matchers</li> <li>Priority System: Control rule evaluation order with priorities</li> <li>Pattern Matching: Support for literal, wildcard, and regex patterns</li> <li>Multiple Actions: Forward, drop, or process with Workers</li> <li>Automatic MX Records: Cloudflare manages MX records automatically</li> </ul>"},{"location":"modules/email/#basic-usage","title":"Basic Usage","text":"<pre><code>module \"email\" {\n  source = \"git::git@github.com:AutomationDojo/tf-module-cloudflare.git//modules/email?ref=v1.0.0\"\n\n  zone_id    = var.cloudflare_zone_id\n  account_id = var.cloudflare_account_id\n\n  email_routing = {\n    enabled = true\n\n    addresses = [\n      {\n        email = \"admin@example.com\"\n      }\n    ]\n\n    rules = [\n      {\n        name     = \"Forward contact emails\"\n        enabled  = true\n        priority = 0\n        matchers = [\n          {\n            type  = \"literal\"\n            field = \"to\"\n            value = \"contact@yourdomain.com\"\n          }\n        ]\n        actions = [\n          {\n            type  = \"forward\"\n            value = [\"admin@example.com\"]\n          }\n        ]\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"modules/email/#advanced-examples","title":"Advanced Examples","text":""},{"location":"modules/email/#multiple-forwarding-rules","title":"Multiple Forwarding Rules","text":"<pre><code>module \"email\" {\n  source = \"git::git@github.com:AutomationDojo/tf-module-cloudflare.git//modules/email?ref=v1.0.0\"\n\n  zone_id    = var.cloudflare_zone_id\n  account_id = var.cloudflare_account_id\n\n  email_routing = {\n    enabled = true\n\n    addresses = [\n      {\n        email = \"admin@example.com\"\n      },\n      {\n        email = \"support@example.com\"\n      },\n      {\n        email = \"sales@example.com\"\n      }\n    ]\n\n    rules = [\n      # Contact form\n      {\n        name     = \"Contact form emails\"\n        enabled  = true\n        priority = 0\n        matchers = [\n          {\n            type  = \"literal\"\n            field = \"to\"\n            value = \"contact@yourdomain.com\"\n          }\n        ]\n        actions = [\n          {\n            type  = \"forward\"\n            value = [\"admin@example.com\"]\n          }\n        ]\n      },\n      # Support requests\n      {\n        name     = \"Support emails\"\n        enabled  = true\n        priority = 1\n        matchers = [\n          {\n            type  = \"literal\"\n            field = \"to\"\n            value = \"support@yourdomain.com\"\n          }\n        ]\n        actions = [\n          {\n            type  = \"forward\"\n            value = [\"support@example.com\"]\n          }\n        ]\n      },\n      # Sales inquiries\n      {\n        name     = \"Sales emails\"\n        enabled  = true\n        priority = 2\n        matchers = [\n          {\n            type  = \"literal\"\n            field = \"to\"\n            value = \"sales@yourdomain.com\"\n          }\n        ]\n        actions = [\n          {\n            type  = \"forward\"\n            value = [\"sales@example.com\"]\n          }\n        ]\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"modules/email/#catch-all-with-wildcards","title":"Catch-All with Wildcards","text":"<pre><code>module \"email\" {\n  source = \"git::git@github.com:AutomationDojo/tf-module-cloudflare.git//modules/email?ref=v1.0.0\"\n\n  zone_id    = var.cloudflare_zone_id\n  account_id = var.cloudflare_account_id\n\n  email_routing = {\n    enabled = true\n\n    addresses = [\n      {\n        email = \"admin@example.com\"\n      }\n    ]\n\n    rules = [\n      # Specific address - higher priority\n      {\n        name     = \"Contact emails\"\n        enabled  = true\n        priority = 0\n        matchers = [\n          {\n            type  = \"literal\"\n            field = \"to\"\n            value = \"contact@yourdomain.com\"\n          }\n        ]\n        actions = [\n          {\n            type  = \"forward\"\n            value = [\"admin@example.com\"]\n          }\n        ]\n      },\n      # Catch all - lower priority\n      {\n        name     = \"Catch all emails\"\n        enabled  = true\n        priority = 100\n        matchers = [\n          {\n            type  = \"wildcard\"\n            field = \"to\"\n            value = \"*@yourdomain.com\"\n          }\n        ]\n        actions = [\n          {\n            type  = \"forward\"\n            value = [\"admin@example.com\"]\n          }\n        ]\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"modules/email/#subject-based-routing","title":"Subject-Based Routing","text":"<pre><code>rules = [\n  {\n    name     = \"Urgent emails\"\n    enabled  = true\n    priority = 0\n    matchers = [\n      {\n        type  = \"wildcard\"\n        field = \"subject\"\n        value = \"*URGENT*\"\n      }\n    ]\n    actions = [\n      {\n        type  = \"forward\"\n        value = [\"urgent@example.com\", \"admin@example.com\"]\n      }\n    ]\n  }\n]\n</code></pre>"},{"location":"modules/email/#regex-pattern-matching","title":"Regex Pattern Matching","text":"<pre><code>rules = [\n  {\n    name     = \"Team member emails\"\n    enabled  = true\n    priority = 0\n    matchers = [\n      {\n        type  = \"regex\"\n        field = \"to\"\n        value = \"^(alice|bob|charlie)@yourdomain\\\\.com$\"\n      }\n    ]\n    actions = [\n      {\n        type  = \"forward\"\n        value = [\"team@example.com\"]\n      }\n    ]\n  }\n]\n</code></pre>"},{"location":"modules/email/#drop-spam","title":"Drop Spam","text":"<pre><code>rules = [\n  {\n    name     = \"Drop spam\"\n    enabled  = true\n    priority = 0\n    matchers = [\n      {\n        type  = \"literal\"\n        field = \"to\"\n        value = \"spam@yourdomain.com\"\n      }\n    ]\n    actions = [\n      {\n        type = \"drop\"\n      }\n    ]\n  }\n]\n</code></pre>"},{"location":"modules/email/#inputs","title":"Inputs","text":"Name Description Type Required <code>zone_id</code> Cloudflare zone ID <code>string</code> Yes <code>account_id</code> Cloudflare account ID <code>string</code> Yes <code>email_routing</code> Email routing configuration <code>object</code> No"},{"location":"modules/email/#email-routing-object","title":"Email Routing Object","text":"Field Description Type Required Default <code>enabled</code> Enable email routing <code>bool</code> No <code>true</code> <code>addresses</code> Destination email addresses <code>list(object)</code> No <code>[]</code> <code>rules</code> Email routing rules <code>list(object)</code> No <code>[]</code>"},{"location":"modules/email/#address-object","title":"Address Object","text":"Field Description Type Required <code>email</code> Destination email address <code>string</code> Yes"},{"location":"modules/email/#rule-object","title":"Rule Object","text":"Field Description Type Required Default <code>name</code> Rule name <code>string</code> Yes - <code>enabled</code> Enable rule <code>bool</code> No <code>true</code> <code>priority</code> Rule priority (lower = higher priority) <code>number</code> Yes - <code>matchers</code> List of matchers <code>list(object)</code> Yes - <code>actions</code> List of actions <code>list(object)</code> Yes -"},{"location":"modules/email/#matcher-object","title":"Matcher Object","text":"Field Description Type Required <code>type</code> Matcher type: <code>literal</code>, <code>wildcard</code>, <code>regex</code> <code>string</code> Yes <code>field</code> Field to match: <code>to</code>, <code>from</code>, <code>subject</code> <code>string</code> Yes <code>value</code> Value/pattern to match <code>string</code> Yes"},{"location":"modules/email/#action-object","title":"Action Object","text":"Field Description Type Required <code>type</code> Action type: <code>forward</code>, <code>drop</code>, <code>worker</code> <code>string</code> Yes <code>value</code> Array of destination emails (for forward) <code>list(string)</code> Conditional"},{"location":"modules/email/#matcher-types","title":"Matcher Types","text":""},{"location":"modules/email/#literal","title":"Literal","text":"<p>Exact string match. Case-sensitive.</p> <pre><code>{\n  type  = \"literal\"\n  field = \"to\"\n  value = \"contact@yourdomain.com\"\n}\n</code></pre>"},{"location":"modules/email/#wildcard","title":"Wildcard","text":"<p>Pattern matching using <code>*</code> (zero or more characters) and <code>?</code> (single character).</p> <pre><code>{\n  type  = \"wildcard\"\n  field = \"to\"\n  value = \"*@yourdomain.com\"  # Matches any address at yourdomain.com\n}\n</code></pre> <pre><code>{\n  type  = \"wildcard\"\n  field = \"subject\"\n  value = \"*invoice*\"  # Matches subjects containing \"invoice\"\n}\n</code></pre>"},{"location":"modules/email/#regex","title":"Regex","text":"<p>Regular expression matching. Supports full regex syntax.</p> <pre><code>{\n  type  = \"regex\"\n  field = \"to\"\n  value = \"^team-.*@yourdomain\\\\.com$\"  # Matches team-*@yourdomain.com\n}\n</code></pre>"},{"location":"modules/email/#matcher-fields","title":"Matcher Fields","text":"Field Description Example <code>to</code> Recipient email address <code>contact@yourdomain.com</code> <code>from</code> Sender email address <code>user@example.com</code> <code>subject</code> Email subject line <code>Order Confirmation</code>"},{"location":"modules/email/#action-types","title":"Action Types","text":""},{"location":"modules/email/#forward","title":"Forward","text":"<p>Forward email to one or more destination addresses.</p> <pre><code>actions = [\n  {\n    type  = \"forward\"\n    value = [\"admin@example.com\", \"backup@example.com\"]\n  }\n]\n</code></pre>"},{"location":"modules/email/#drop","title":"Drop","text":"<p>Reject/drop the email.</p> <pre><code>actions = [\n  {\n    type = \"drop\"\n  }\n]\n</code></pre>"},{"location":"modules/email/#worker","title":"Worker","text":"<p>Process with a Cloudflare Worker (advanced).</p> <pre><code>actions = [\n  {\n    type  = \"worker\"\n    value = [\"email-processor-worker\"]\n  }\n]\n</code></pre>"},{"location":"modules/email/#priority-system","title":"Priority System","text":"<p>Rules are evaluated in order of priority (lower numbers first). The first matching rule is applied.</p> <pre><code>rules = [\n  # Priority 0 - checked first\n  {\n    name     = \"Specific contact\"\n    priority = 0\n    # ...\n  },\n  # Priority 10 - checked second\n  {\n    name     = \"Support emails\"\n    priority = 10\n    # ...\n  },\n  # Priority 100 - checked last (catch-all)\n  {\n    name     = \"Catch all\"\n    priority = 100\n    # ...\n  }\n]\n</code></pre> <p>Priority Best Practice</p> <ul> <li>Use priority 0-10 for specific rules</li> <li>Use priority 100+ for catch-all rules</li> <li>Leave gaps for easier insertion later</li> </ul>"},{"location":"modules/email/#important-notes","title":"Important Notes","text":"<p>Email Verification Required</p> <p>All destination addresses must be verified by Cloudflare before they can receive forwarded emails. Cloudflare automatically sends verification emails when addresses are added.</p> <p>MX Records</p> <p>When email routing is enabled, Cloudflare automatically manages MX records for your domain. Any existing MX records will be overridden.</p> <p>Testing</p> <p>After setting up rules, test by sending emails to verify routing works as expected.</p> <p>Limitations</p> <ul> <li>Free plan: Up to 200 destination addresses</li> <li>Email size limit: 25 MB</li> <li>Attachments are preserved when forwarding</li> </ul>"},{"location":"modules/email/#dns-requirements","title":"DNS Requirements","text":"<p>Email routing requires your domain to use Cloudflare nameservers. The module will automatically configure the necessary MX records.</p>"},{"location":"modules/email/#verification-process","title":"Verification Process","text":"<ol> <li>Add destination addresses to the configuration</li> <li>Apply Terraform configuration</li> <li>Check the email inbox for verification emails from Cloudflare</li> <li>Click the verification link in each email</li> <li>Addresses are now ready to receive forwarded emails</li> </ol>"},{"location":"modules/email/#troubleshooting","title":"Troubleshooting","text":""},{"location":"modules/email/#emails-not-being-forwarded","title":"Emails Not Being Forwarded","text":"<ol> <li>Check that destination addresses are verified</li> <li>Verify MX records are configured correctly</li> <li>Check rule priorities and matcher patterns</li> <li>Review Cloudflare dashboard for email routing logs</li> </ol>"},{"location":"modules/email/#verification-email-not-received","title":"Verification Email Not Received","text":"<ol> <li>Check spam/junk folder</li> <li>Ensure email address is correct</li> <li>Try resending from Cloudflare dashboard</li> </ol>"},{"location":"modules/email/#related","title":"Related","text":"<ul> <li>DNS Module - Manage DNS records</li> <li>Complete Setup Example</li> <li>Cloudflare Email Routing Documentation</li> </ul>"},{"location":"modules/pages/","title":"Pages","text":""},{"location":"modules/pages/#pages-module","title":"Pages Module","text":"<p>The Pages module enables you to create and manage Cloudflare Pages projects with GitHub integration for automatic deployments.</p>"},{"location":"modules/pages/#features","title":"Features","text":"<ul> <li>GitHub Integration: Automatic CI/CD from your GitHub repository</li> <li>Custom Domains: Configure custom domains with automatic SSL/TLS certificates</li> <li>Environment Variables: Set build-time and runtime environment variables</li> <li>Multiple Projects: Manage multiple Pages projects from a single module</li> <li>Production &amp; Preview: Automatic deployments for production and preview branches</li> </ul>"},{"location":"modules/pages/#basic-usage","title":"Basic Usage","text":"<pre><code>module \"pages\" {\n  source = \"git::git@github.com:AutomationDojo/tf-module-cloudflare.git//modules/pages?ref=v1.0.0\"\n\n  account_id = var.cloudflare_account_id\n\n  projects = {\n    my-website = {\n      name              = \"my-website\"\n      production_branch = \"main\"\n      github_repo       = \"my-org/my-website\"\n      build_command     = \"npm run build\"\n      destination_dir   = \"dist\"\n    }\n  }\n}\n</code></pre>"},{"location":"modules/pages/#advanced-usage","title":"Advanced Usage","text":""},{"location":"modules/pages/#with-custom-domain","title":"With Custom Domain","text":"<pre><code>module \"pages\" {\n  source = \"git::git@github.com:AutomationDojo/tf-module-cloudflare.git//modules/pages?ref=v1.0.0\"\n\n  account_id = var.cloudflare_account_id\n\n  projects = {\n    marketing-site = {\n      name              = \"marketing-site\"\n      production_branch = \"main\"\n      github_repo       = \"company/marketing\"\n      build_command     = \"npm run build\"\n      destination_dir   = \"public\"\n      custom_domain     = \"www.example.com\"\n    }\n  }\n}\n</code></pre>"},{"location":"modules/pages/#with-environment-variables","title":"With Environment Variables","text":"<pre><code>module \"pages\" {\n  source = \"git::git@github.com:AutomationDojo/tf-module-cloudflare.git//modules/pages?ref=v1.0.0\"\n\n  account_id = var.cloudflare_account_id\n\n  projects = {\n    api-docs = {\n      name              = \"api-docs\"\n      production_branch = \"main\"\n      github_repo       = \"company/api-docs\"\n      build_command     = \"npm run build\"\n      destination_dir   = \"build\"\n      environment_variables = {\n        NODE_VERSION = \"20\"\n        NPM_VERSION  = \"10\"\n        API_URL      = \"https://api.example.com\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"modules/pages/#multiple-projects","title":"Multiple Projects","text":"<pre><code>module \"pages\" {\n  source = \"git::git@github.com:AutomationDojo/tf-module-cloudflare.git//modules/pages?ref=v1.0.0\"\n\n  account_id = var.cloudflare_account_id\n\n  projects = {\n    landing-page = {\n      name              = \"landing-page\"\n      production_branch = \"main\"\n      github_repo       = \"company/landing\"\n      build_command     = \"npm run build\"\n      destination_dir   = \"dist\"\n      custom_domain     = \"www.example.com\"\n    }\n\n    blog = {\n      name              = \"company-blog\"\n      production_branch = \"main\"\n      github_repo       = \"company/blog\"\n      build_command     = \"hugo\"\n      destination_dir   = \"public\"\n      custom_domain     = \"blog.example.com\"\n    }\n\n    docs = {\n      name              = \"documentation\"\n      production_branch = \"main\"\n      github_repo       = \"company/docs\"\n      build_command     = \"mkdocs build\"\n      destination_dir   = \"site\"\n      custom_domain     = \"docs.example.com\"\n    }\n  }\n}\n</code></pre>"},{"location":"modules/pages/#inputs","title":"Inputs","text":"Name Description Type Required <code>account_id</code> Cloudflare account ID <code>string</code> Yes <code>projects</code> Map of Cloudflare Pages projects <code>map(object)</code> Yes"},{"location":"modules/pages/#project-object","title":"Project Object","text":"Field Description Type Required Default <code>name</code> Project name (must be unique) <code>string</code> Yes - <code>production_branch</code> Git branch for production <code>string</code> Yes - <code>github_repo</code> GitHub repository (format: <code>owner/repo</code>) <code>string</code> Yes - <code>build_command</code> Build command to run <code>string</code> Yes - <code>destination_dir</code> Output directory after build <code>string</code> Yes - <code>custom_domain</code> Custom domain for the project <code>string</code> No <code>null</code> <code>environment_variables</code> Build environment variables <code>map(string)</code> No <code>{}</code>"},{"location":"modules/pages/#outputs","title":"Outputs","text":"Name Description <code>projects</code> Map of all Cloudflare Pages projects <code>default_urls</code> Map of default <code>pages.dev</code> URLs <code>custom_domains</code> Map of configured custom domains"},{"location":"modules/pages/#example-output-usage","title":"Example Output Usage","text":"<pre><code>output \"website_url\" {\n  description = \"Production URL for the marketing site\"\n  value       = module.pages.custom_domains[\"marketing-site\"]\n}\n\noutput \"preview_url\" {\n  description = \"Default pages.dev URL\"\n  value       = module.pages.default_urls[\"marketing-site\"]\n}\n</code></pre>"},{"location":"modules/pages/#framework-support","title":"Framework Support","text":"<p>Cloudflare Pages supports many popular frameworks out of the box:</p> <ul> <li>Static Site Generators: Hugo, Jekyll, Eleventy, MkDocs</li> <li>React Frameworks: Next.js, Gatsby, Create React App</li> <li>Vue Frameworks: Nuxt, VuePress, Gridsome</li> <li>Other: Svelte, SvelteKit, Astro, Remix</li> </ul>"},{"location":"modules/pages/#prerequisites","title":"Prerequisites","text":"<ol> <li>GitHub Repository: Your code must be in a GitHub repository</li> <li>Cloudflare Account: You need a Cloudflare account</li> <li>GitHub OAuth: Cloudflare needs to be connected to your GitHub account (done via Cloudflare dashboard)</li> </ol>"},{"location":"modules/pages/#dns-configuration","title":"DNS Configuration","text":"<p>When using custom domains, ensure:</p> <ol> <li>Your domain is added to Cloudflare</li> <li>DNS records point to Cloudflare's nameservers</li> <li>The custom domain DNS record will be automatically managed by Cloudflare Pages</li> </ol>"},{"location":"modules/pages/#important-notes","title":"Important Notes","text":"<p>Build Configuration</p> <p>The build configuration (build command, destination directory) must match your framework's requirements.</p> <p>Project Names</p> <p>Project names must be globally unique across all Cloudflare Pages projects.</p> <p>Environment Variables</p> <p>Environment variables are available during build time. For runtime variables in frameworks like Next.js, use the appropriate prefix (e.g., <code>NEXT_PUBLIC_</code>).</p>"},{"location":"modules/pages/#related","title":"Related","text":"<ul> <li>Complete Setup Example</li> <li>DNS Module - Configure DNS records</li> <li>Cloudflare Pages Documentation</li> </ul>"}]}